(this.webpackJsonptimelapses=this.webpackJsonptimelapses||[]).push([[0],{11:function(t,e,n){t.exports=n(18)},16:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),o=n(8),c=n.n(o),r=(n(16),n(9)),s=n(3),l=n(1),h=(n(17),n(2)),u=n(5),f="ontouchstart"in window||navigator.msMaxTouchPoints,d=f;function g(t){var e=v(t);return""===e?"":t.split(e)[0]}function m(t){var e=v(t);return""===e?t:t.split(e)[1]}function v(t){var e=t.match(/\d+(?!.*\d)/g);return null===e?"":e[0]}function p(t){console.warn("Can\u2019t parse the file sequence correctly, returning [].\nReason: "+t)}var w=[];var y=function(){function t(e){Object(h.a)(this,t);if(this.config=Object(s.a)(Object(s.a)({},{canvas:null,list:[],from:"",to:"",step:1,scaleMode:"cover",direction:"x",playMode:"drag",loop:"loop",interval:0,autoLoad:"all",fitFirstImage:!1,showLoadedImages:!1,dragAmount:10,hiDPI:!0}),e),""==this.config.from&&""==this.config.to&&0==this.config.list.length)return console.error("Missing filenames."),!1;if(null===this.config.canvas){var n=document.createElement("canvas");document.body.appendChild(n),this.config.canvas=n,this.config.fitFirstImage=!0}this.pointer={x:0,y:0,down:!1},this.current=-1,this.images=[],this.directionSign=/-/.test(this.config.direction)?-1:1,this.lastLoaded=-1,this.pongSign=1,this.ctx=this.config.canvas.getContext("2d"),this.list=this.config.list.length>0?this.config.list:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=[],a=v(t);if(""===a)return p("the first filename doesn\u2019t contain a number."),i;var o=v(e);if(""===o)return p("the last filename doesn\u2019t contain a number."),i;var c=g(t),r=m(t);if(c!=g(e)||r!=m(e))return p("the base-names of '"+t+"' and '"+e+"' don\u2019t match."),i;var s=0==a.charAt(0)||0==o.charAt(0);if(s&&a.length!=o.length)return p("wrong number of leading zeros."),i;var l=parseInt(a),h=parseInt(o);if(s)for(var u=l;u<h;u+=n)i.push(c+(u+"").padStart(a.length,"0")+r);else for(var f=l;f<h;f+=n)i.push(c+f+r);return i}(this.config.from,this.config.to,this.config.step),this.size(this.ctx.canvas.width,this.ctx.canvas.height),"first"==this.config.autoLoad?new S(this.images,[this.list.shift()],x.bind(null,this)):"all"==this.config.autoLoad&&this.load()}return Object(u.a)(t,[{key:"load",value:function(){this.load=function(){console.log("load() can be called only once.")},new S(this.images,this.list,x.bind(null,this),I.bind(null,this))}},{key:"run",value:function(){var t=this,e=d?"touchmove":"mousemove",n=d?"touchstart":"mousedown",i=d?"touchend":"mouseup";if("hover"===this.config.playMode)this.ctx.canvas.addEventListener(e,L.bind(null,this));else if("drag"===this.config.playMode)this.ctx.canvas.addEventListener(e,E.bind(null,this)),this.ctx.canvas.addEventListener(n,b.bind(null,this)),document.addEventListener(i,M.bind(null,this));else if("auto"===this.config.playMode){var a=0;requestAnimationFrame((function e(n){var i=n-a;i>=t.config.interval&&(t.nextImage(),a=Math.max(n,n-(i-t.config.interval))),requestAnimationFrame(e)}))}}},{key:"nextImage",value:function(t){t||(t=this.config.loop),"pong"===t?(this.current+=this.pongSign,this.current>=this.images.length-1?(this.pongSign=-1,this.current=this.images.length-1):this.current<=0&&(this.pongSign=1,this.current=0),this.drawImage(this.current)):this.drawImage(++this.current%this.images.length)}},{key:"drawImage",value:function(t){if(void 0===t&&(t=this.current),!(t<0||t>=this.images.length)){var e,n,i=this.config.hiDPI?Math.max(window.devicePixelRatio,2):1,a=this.ctx.canvas.width/i,o=this.ctx.canvas.height/i,c=a/o,r=this.images[t],s=r.width/r.height;"cover"==this.config.scaleMode?c>s?n=(e=a)/s:e=(n=o)*s:"contain"==this.config.scaleMode?c<s?n=(e=a)/s:e=(n=o)*s:(e=r.width,n=r.height);var l=a/2-e/2,h=o/2-n/2;this.ctx.save(),this.ctx.scale(i,i),this.ctx.clearRect(0,0,a,o),this.ctx.drawImage(r,0,0,r.width,r.height,~~l,~~h,~~e,~~n),this.ctx.restore()}}},{key:"size",value:function(t,e,n){var i=this.config.originalWidth,a=this.config.originalHeight,o=Math.min((window.innerWidth-16)/i,(window.innerHeight-92)/a),c=o*i,r=o*a;this.config.canvas.parentElement.style.marginTop="".concat(parseInt((window.innerHeight-r)/2),"px"),t=c,e=r;var s=this.config.hiDPI?Math.max(window.devicePixelRatio,2):1,l=this.ctx.canvas;l.width=t*s,l.height=e*s,l.style.width=t+"px",l.style.height=e+"px",this.drawImage(),n&&window.requestAnimationFrame((function(){document.querySelectorAll(".note").forEach((function(t){t.style.lineHeight="".concat(parseInt((window.innerHeight-r)/2),"px"),t.style.height="".concat(parseInt((window.innerHeight-r)/2),"px")}))}))}}]),t}();function x(t,e){e.id>t.lastLoaded&&t.config.showLoadedImages&&(t.drawImage(e.id),t.lastLoaded=e.id),"function"===typeof t.config.imageLoad&&(e.sequencer=t,t.config.imageLoad(e)),"function"===typeof t.imageLoad&&(e.sequencer=t,t.imageLoad(e)),0===e.id&&(t.config.fitFirstImage&&(t.size(e.img.width,e.img.height),t.config.fitFirstImage=!1),t.drawImage(0),t.current=0)}function I(t,e){"function"===typeof t.config.queueComplete&&(e.sequencer=t,t.config.queueComplete(e)),"function"===typeof t.queueComplete&&t.queueComplete(e),t.run(),t.config.showLoadedImages||"none"===t.config.playMode||t.drawImage(0)}function b(t,e){var n,i;e.touches?(n=e.touches[0].pageX-e.touches[0].target.offsetLeft,i=e.touches[0].pageY-e.touches[0].target.offsetTop):(n=e.offsetX,i=e.offsetY),t.pointer={x:n,y:i,down:!0,currentId:t.current}}function M(t,e){t.pointer.down=!1}function E(t,e){if(t.pointer.down){var n,i,a=t.images.length;e.touches?(n=e.touches[0].pageX-e.touches[0].target.offsetLeft,i=e.touches[0].pageY-e.touches[0].target.offsetTop):(n=e.offsetX,i=e.offsetY);var o=0;/x/.test(t.config.direction)?o=(n-t.pointer.x)*t.directionSign:/y/.test(t.config.direction)&&(o=(i-t.pointer.y)*t.directionSign);var c=t.pointer.currentId+Math.floor(o/t.config.dragAmount);c<0?c=a- -c%a:c>a&&(c%=a),c!=t.current&&(t.drawImage(c),t.current=c),e.preventDefault()}}function L(t,e){var n,i,a,o,c=t.images.length,r=t.config.hiDPI?Math.max(window.devicePixelRatio,2):1;e.touches?(n=e.touches[0].pageX-e.touches[0].target.offsetLeft,i=e.touches[0].pageY-e.touches[0].target.offsetTop):(n=e.offsetX,i=e.offsetY),"x"==t.config.direction?(o=t.ctx.canvas.width/r,a=n):"-x"==t.config.direction?a=(o=t.ctx.canvas.width/r)-n-1:"y"==t.config.direction?(o=t.ctx.canvas.height/r,a=i):"-y"==t.config.direction&&(a=(o=t.ctx.canvas.height/r)-i-1);var s,l,h,u=(s=Math.floor(a/o*c),h=c-1,s<(l=0)?l:s>h?h:s);u!=t.current&&(t.drawImage(u),t.current=u,t.config.onSelect&&t.config.onSelect(u)),e.preventDefault()}function S(t,e,n,i){for(var a=Math.min(e.length,6),o=t.length-1,c=t.length,r=0;r<a;r++)s();function s(){if(!(o>=e.length-1)){o++;var a,r=new Image;r.src=e[o],a=o,r.onload=function(t){"function"===typeof n&&n({id:a,img:r,count:++c,total:e.length}),c<e.length&&s(),c==e.length&&"function"===typeof i&&i({total:e.length})},r.onerror=function(t){console.error("Error with: "+e[a])},t.push(r)}}}var H={make:function(t){var e=new y(t);return!1!==e&&w.push(e),e},instances:w},j=n(10),F={mgyon:{initialFrame:6590,initialHour:17,initialMinute:16,finalFrame:7009,finalHour:17,finalMinute:23,list:k("mgyonp/DSCF",6590,7009,[7e3,6764,6825]).filter((function(t,e){return t.photoId<6630||t.photoId>6969?e%2===0:e%3===0}))},thunder:{initialFrame:1887,initialHour:21,initialMinute:0,finalFrame:2439,finalHour:21,finalMinute:55,list:k("thunderp/DSCF",1888,2339,[]).filter((function(t,e){return e<30||(e>130&&e<190||e%2===1)}))},drone:{initialFrame:8274,initialHour:17,initialMinute:47,finalFrame:8564,finalHour:17,finalMinute:52,list:k("dronep/DSCF",8310,8554,[]).filter((function(t,e){return e>100||e<10||e%2===0}))}};function k(t,e,n,i){return new Array(n-e).fill("").map((function(n,a){return i.includes(e+a)?null:{path:"".concat(t).concat(e+a,".jpg"),photoId:e+a}})).filter((function(t){return!!t}))}function q(t){var e=t.id,n=t.list,i=t.initialFrame,a=t.finalFrame,o=60*(60*t.initialHour+t.initialMinute),c=60*(60*t.finalHour+t.finalMinute);return function(t){var e="0".concat(Math.floor(t/60/60)%24).slice(-2),n="0".concat(Math.floor(t/60)%60).slice(-2),i="0".concat(Math.floor(t%60)).slice(-2),a="00".concat(Math.floor(t%1*100)).slice(-2);return"".concat(e,":").concat(n,":").concat(i,".").concat(a)}((n[e].photoId-i)*((c-o)/(a-i))+o)}function O(t){var e=a.a.useState(!1),n=Object(l.a)(e,2),i=n[0],o=n[1],c=t.name,r=t.list,h=t.height,u=t.width,f=t.active,d=t.onLoad,g=void 0===d?function(){}:d,m=t.onScreen,v=a.a.useState(!0),p=Object(l.a)(v,2),w=p[0],y=p[1],x=a.a.useState(null),I=Object(l.a)(x,2),b=I[0],M=I[1],E=a.a.useState([0,1]),L=Object(l.a)(E,2),S=L[0],j=L[1],k=a.a.useState(-1),O=Object(l.a)(k,2),A=O[0],C=O[1];return console.log(F[c].list[A]&&F[c].list[A].photoId),a.a.useEffect((function(){if(f&&!i){o(!0);var t={direction:"x",scaleMode:"contain",showLoadedImages:!0,playMode:"hover",originalHeight:h,originalWidth:u,hiDPI:!1,imageLoad:function(t){j([Math.max(S[0],t.count),t.total])},queueComplete:function(t){y(!1),g()},onSelect:function(t){C(t)}},e=H.make(Object(s.a)(Object(s.a)({},t),{},{list:r,canvas:document.querySelector(".swiper-slide.-".concat(c," canvas"))}));window.addEventListener("resize",(function(){e.size(null,null,m)})),e.size(null,null,m),M(e)}}),[f,i]),a.a.useEffect((function(){m&&b&&b.size(null,null,!0)}),[m]),a.a.createElement("div",{className:"swiper-slide -".concat(c)},a.a.createElement("div",{className:"canvas-container"},a.a.createElement("canvas",{className:"canvas",key:"canvas"}),w&&a.a.createElement("div",{className:"info"},"Loading... ",Number(S[0]/S[1]*100).toFixed(0),"%"),!w&&-1===A&&a.a.createElement("div",{className:"info"},"Hover or drag the picture..."),!w&&-1!==A&&a.a.createElement("div",{className:"info -number"},q(Object(s.a)({id:A},F[c])))))}var A=function(){var t=a.a.useState(0),e=Object(l.a)(t,2),n=e[0],i=e[1],o=a.a.useState(0),c=Object(l.a)(o,2),s=c[0],h=c[1];return a.a.useEffect((function(){function t(){document.querySelectorAll(".swiper-slide").forEach((function(t){t.style.height="".concat(window.innerHeight,"px")})),document.querySelectorAll(".swiper-container").forEach((function(t){t.style.height="".concat(window.innerHeight,"px")})),document.querySelectorAll(".canvas-container").forEach((function(t){t.style.height="".concat(window.innerHeight,"px")}))}window.setTimeout((function(){var e=new j.a(".swiper-container",{direction:"vertical",mousewheel:!0});document.body.classList.add("-mgyon"),e.on("slideChange",(function(){var t,n=Object(r.a)(document.body.classList);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.includes("-")&&document.body.classList.remove(i)}}catch(a){n.e(a)}finally{n.f()}document.body.classList.add("-".concat(Object.keys(F)[e.activeIndex])),h(e.activeIndex)})),t()}),64),t(),window.addEventListener("resize",t)}),[]),a.a.useEffect((function(){i(Math.max(n,s))}),[n,s]),a.a.createElement("div",{className:"swiper-container"},a.a.createElement("div",{className:"swiper-wrapper"},a.a.createElement(O,{active:n>=0,onLoad:function(){i(Math.max(n,1))},height:1080,width:720,list:F.mgyon.list.map((function(t){return t.path})),onScreen:0===s,key:"mgyon",name:"mgyon"}),a.a.createElement(O,{active:n>=1,onLoad:function(){i(Math.max(n,2))},height:1080,width:720,list:F.thunder.list.map((function(t){return t.path})),onScreen:1===s,key:"thunder",name:"thunder"}),a.a.createElement(O,{active:n>=2,onLoad:function(){i(Math.max(n,3))},height:720,width:1080,list:F.drone.list.map((function(t){return t.path})),onScreen:2===s,key:"drone",name:"drone"})),a.a.createElement("div",{className:"note -how"},"Hover or drag the picture for time travel \u2935"),s<2&&a.a.createElement("div",{className:"note -more"},"There is more \u2193"),2===s&&a.a.createElement("div",{className:"note -more"},"Photos and web by ",a.a.createElement("a",{href:"https://javier.xyz"},"javierbyte")," Thanks! v0.10"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.39253a97.chunk.js.map