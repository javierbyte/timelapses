(this.webpackJsonptimelapses=this.webpackJsonptimelapses||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(7),c=n.n(o),r=(n(14),n(4)),s=n(1),h=(n(15),n(2)),l=n(5),u="ontouchstart"in window||navigator.msMaxTouchPoints,d=u;function f(e){var t=m(e);return""===t?"":e.split(t)[0]}function g(e){var t=m(e);return""===t?e:e.split(t)[1]}function m(e){var t=e.match(/\d+(?!.*\d)/g);return null===t?"":t[0]}function v(e){console.warn("Can\u2019t parse the file sequence correctly, returning [].\nReason: "+e)}var p=[];var w=function(){function e(t){Object(h.a)(this,e);if(this.config=Object(r.a)(Object(r.a)({},{canvas:null,list:[],from:"",to:"",step:1,scaleMode:"cover",direction:"x",playMode:"drag",loop:"loop",interval:0,autoLoad:"all",fitFirstImage:!1,showLoadedImages:!1,dragAmount:10,hiDPI:!0}),t),""==this.config.from&&""==this.config.to&&0==this.config.list.length)return console.error("Missing filenames."),!1;if(null===this.config.canvas){var n=document.createElement("canvas");document.body.appendChild(n),this.config.canvas=n,this.config.fitFirstImage=!0}this.pointer={x:0,y:0,down:!1},this.current=-1,this.images=[],this.directionSign=/-/.test(this.config.direction)?-1:1,this.lastLoaded=-1,this.pongSign=1,this.ctx=this.config.canvas.getContext("2d"),this.list=this.config.list.length>0?this.config.list:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=[],a=m(e);if(""===a)return v("the first filename doesn\u2019t contain a number."),i;var o=m(t);if(""===o)return v("the last filename doesn\u2019t contain a number."),i;var c=f(e),r=g(e);if(c!=f(t)||r!=g(t))return v("the base-names of '"+e+"' and '"+t+"' don\u2019t match."),i;var s=0==a.charAt(0)||0==o.charAt(0);if(s&&a.length!=o.length)return v("wrong number of leading zeros."),i;var h=parseInt(a),l=parseInt(o);if(s)for(var u=h;u<l;u+=n)i.push(c+(u+"").padStart(a.length,"0")+r);else for(var d=h;d<l;d+=n)i.push(c+d+r);return i}(this.config.from,this.config.to,this.config.step),this.size(this.ctx.canvas.width,this.ctx.canvas.height),"first"==this.config.autoLoad?new L(this.images,[this.list.shift()],x.bind(null,this)):"all"==this.config.autoLoad&&this.load()}return Object(l.a)(e,[{key:"load",value:function(){this.load=function(){console.log("load() can be called only once.")},new L(this.images,this.list,x.bind(null,this),y.bind(null,this))}},{key:"run",value:function(){var e=this,t=d?"touchmove":"mousemove",n=d?"touchstart":"mousedown",i=d?"touchend":"mouseup";if("hover"===this.config.playMode)this.ctx.canvas.addEventListener(t,S.bind(null,this));else if("drag"===this.config.playMode)this.ctx.canvas.addEventListener(t,E.bind(null,this)),this.ctx.canvas.addEventListener(n,b.bind(null,this)),document.addEventListener(i,I.bind(null,this));else if("auto"===this.config.playMode){var a=0;requestAnimationFrame((function t(n){var i=n-a;i>=e.config.interval&&(e.nextImage(),a=Math.max(n,n-(i-e.config.interval))),requestAnimationFrame(t)}))}}},{key:"nextImage",value:function(e){e||(e=this.config.loop),"pong"===e?(this.current+=this.pongSign,this.current>=this.images.length-1?(this.pongSign=-1,this.current=this.images.length-1):this.current<=0&&(this.pongSign=1,this.current=0),this.drawImage(this.current)):this.drawImage(++this.current%this.images.length)}},{key:"drawImage",value:function(e){if(void 0===e&&(e=this.current),!(e<0||e>=this.images.length)){var t,n,i=this.config.hiDPI?window.devicePixelRatio:1,a=this.ctx.canvas.width/i,o=this.ctx.canvas.height/i,c=a/o,r=this.images[e],s=r.width/r.height;"cover"==this.config.scaleMode?c>s?n=(t=a)/s:t=(n=o)*s:"contain"==this.config.scaleMode?c<s?n=(t=a)/s:t=(n=o)*s:(t=r.width,n=r.height);var h=a/2-t/2,l=o/2-n/2;this.ctx.save(),this.ctx.scale(i,i),this.ctx.clearRect(0,0,a,o),this.ctx.drawImage(r,0,0,r.width,r.height,~~h,~~l,~~t,~~n),this.ctx.restore()}}},{key:"size",value:function(e,t,n){var i=this.config.originalWidth,a=this.config.originalHeight,o=Math.min((window.innerWidth-8)/i,(window.innerHeight-92)/a),c=o*i,r=o*a;this.config.canvas.parentElement.style.marginTop="".concat(parseInt((window.innerHeight-r)/2),"px"),e=c,t=r;var s=this.config.hiDPI?window.devicePixelRatio:1,h=this.ctx.canvas;h.width=e*s,h.height=t*s,h.style.width=e+"px",h.style.height=t+"px",this.drawImage(),n&&window.requestAnimationFrame((function(){document.querySelectorAll(".note").forEach((function(e){e.style.lineHeight="".concat(parseInt((window.innerHeight-r)/2),"px"),e.style.height="".concat(parseInt((window.innerHeight-r)/2),"px")}))}))}}]),e}();function x(e,t){t.id>e.lastLoaded&&e.config.showLoadedImages&&(e.drawImage(t.id),e.lastLoaded=t.id),"function"===typeof e.config.imageLoad&&(t.sequencer=e,e.config.imageLoad(t)),"function"===typeof e.imageLoad&&(t.sequencer=e,e.imageLoad(t)),0===t.id&&(e.config.fitFirstImage&&(e.size(t.img.width,t.img.height),e.config.fitFirstImage=!1),e.drawImage(0),e.current=0)}function y(e,t){"function"===typeof e.config.queueComplete&&(t.sequencer=e,e.config.queueComplete(t)),"function"===typeof e.queueComplete&&e.queueComplete(t),e.run(),e.config.showLoadedImages||"none"===e.config.playMode||e.drawImage(0)}function b(e,t){var n,i;t.touches?(n=t.touches[0].pageX-t.touches[0].target.offsetLeft,i=t.touches[0].pageY-t.touches[0].target.offsetTop):(n=t.offsetX,i=t.offsetY),e.pointer={x:n,y:i,down:!0,currentId:e.current}}function I(e,t){e.pointer.down=!1}function E(e,t){if(e.pointer.down){var n,i,a=e.images.length;t.touches?(n=t.touches[0].pageX-t.touches[0].target.offsetLeft,i=t.touches[0].pageY-t.touches[0].target.offsetTop):(n=t.offsetX,i=t.offsetY);var o=0;/x/.test(e.config.direction)?o=(n-e.pointer.x)*e.directionSign:/y/.test(e.config.direction)&&(o=(i-e.pointer.y)*e.directionSign);var c=e.pointer.currentId+Math.floor(o/e.config.dragAmount);c<0?c=a- -c%a:c>a&&(c%=a),c!=e.current&&(e.drawImage(c),e.current=c),t.preventDefault()}}function S(e,t){var n,i,a,o,c=e.images.length,r=e.config.hiDPI?window.devicePixelRatio:1;t.touches?(n=t.touches[0].pageX-t.touches[0].target.offsetLeft,i=t.touches[0].pageY-t.touches[0].target.offsetTop):(n=t.offsetX,i=t.offsetY),"x"==e.config.direction?(o=e.ctx.canvas.width/r,a=n):"-x"==e.config.direction?a=(o=e.ctx.canvas.width/r)-n-1:"y"==e.config.direction?(o=e.ctx.canvas.height/r,a=i):"-y"==e.config.direction&&(a=(o=e.ctx.canvas.height/r)-i-1);var s,h,l,u=(s=Math.floor(a/o*c),l=c-1,s<(h=0)?h:s>l?l:s);u!=e.current&&(e.drawImage(u),e.current=u,e.config.onSelect&&e.config.onSelect(u)),t.preventDefault()}function L(e,t,n,i){for(var a=Math.min(t.length,6),o=e.length-1,c=e.length,r=0;r<a;r++)s();function s(){if(!(o>=t.length-1)){o++;var a,r=new Image;r.src=t[o],a=o,r.onload=function(e){"function"===typeof n&&n({id:a,img:r,count:++c,total:t.length}),c<t.length&&s(),c==t.length&&"function"===typeof i&&i({total:t.length})},r.onerror=function(e){console.error("Error with: "+t[a])},e.push(r)}}}var M={make:function(e){var t=new w(e);return!1!==t&&p.push(t),t},instances:p},q=n(8);function j(e,t,n,i){return new Array(n-t).fill("").map((function(n,a){return i.includes(t+a)?null:"".concat(e).concat(t+a,".jpg")})).filter((function(e){return!!e}))}var k=j("gyonp/DSCF",6600,7009,[6764,7e3,6732,6825]).filter((function(e,t){return t<10||t%3===0})),C=j("thunderp/DSCF",1888,2339,[]).filter((function(e,t){return t<30||(t>130&&t<190||t%2===1)})),O=j("dronep/DSCF",8310,8554,[]).filter((function(e,t){return t>100||t<10||t%2===0}));function A(e){var t=a.a.useState(!1),n=Object(s.a)(t,2),i=n[0],o=n[1],c=e.name,h=e.list,l=e.height,u=e.width,d=e.active,f=e.onLoad,g=void 0===f?function(){}:f,m=e.onScreen,v=a.a.useState(!0),p=Object(s.a)(v,2),w=p[0],x=p[1],y=a.a.useState(null),b=Object(s.a)(y,2),I=b[0],E=b[1],S=a.a.useState([0,1]),L=Object(s.a)(S,2),q=L[0],j=L[1],k=a.a.useState(-1),C=Object(s.a)(k,2),O=C[0],A=C[1];return a.a.useEffect((function(){if(d&&!i){o(!0);var e={direction:"x",scaleMode:"contain",showLoadedImages:!0,playMode:"hover",originalHeight:l,originalWidth:u,imageLoad:function(e){j([Math.max(q[0],e.count),e.total])},queueComplete:function(e){x(!1),g()},onSelect:function(e){A(e)}},t=M.make(Object(r.a)(Object(r.a)({},e),{},{list:h,canvas:document.querySelector(".-".concat(c," canvas"))}));E(t),window.addEventListener("resize",(function(){t.size(null,null,m)})),t.size(null,null,m)}}),[d]),a.a.useEffect((function(){m&&I&&I.size(null,null,!0)}),[m]),a.a.createElement("div",{className:"swiper-slide -".concat(c)},a.a.createElement("div",{className:"canvas-container"},a.a.createElement("canvas",{className:"canvas",key:"canvas",style:{}}),w&&a.a.createElement("div",{className:"loading"},"Loading...",a.a.createElement("br",null),Number(q[0]/q[1]*100).toFixed(0),"%"),!w&&-1===O&&a.a.createElement("div",{className:"loading"},"Hover or drag the picture..."),!w&&-1!==O&&a.a.createElement("div",{className:"loading"},O)))}var H=function(){var e=a.a.useState(0),t=Object(s.a)(e,2),n=t[0],i=t[1],o=a.a.useState(0),c=Object(s.a)(o,2),r=c[0],h=c[1];return a.a.useEffect((function(){function e(){document.querySelectorAll(".swiper-slide").forEach((function(e){e.style.height="".concat(window.innerHeight,"px")})),document.querySelectorAll(".swiper-container").forEach((function(e){e.style.height="".concat(window.innerHeight,"px")})),document.querySelectorAll(".canvas-container").forEach((function(e){e.style.height="".concat(window.innerHeight,"px")}))}window.setTimeout((function(){var t=new q.a(".swiper-container",{direction:"vertical",mousewheel:!0});t.on("slideChange",(function(){document.body.style.backgroundColor=["#9b59b6","#e67e22","#e74c3c"][t.activeIndex],h(t.activeIndex),i(Math.max(n,t.activeIndex))})),e()}),16),e(),window.addEventListener("resize",e)}),[]),a.a.createElement("div",{className:"swiper-container"},a.a.createElement("div",{className:"swiper-wrapper"},a.a.createElement(A,{active:n>=0,onLoad:function(){i(Math.max(n,1))},height:1080,width:720,list:k,onScreen:0===r,name:"gyon"}),a.a.createElement(A,{active:n>=1,onLoad:function(){i(Math.max(n,2))},height:1080,width:720,list:C,onScreen:1===r,name:"thunder"}),a.a.createElement(A,{active:n>=2,onLoad:function(){i(Math.max(n,3))},height:720,width:1080,list:O,onScreen:2===r,name:"drone"})),a.a.createElement("div",{className:"note -how"},"Hover or drag the picture for time travel \u2935"),r<2&&a.a.createElement("div",{className:"note -more"},"There is more \u2193"),2===r&&a.a.createElement("div",{className:"note -more"},"Photos and code by ",a.a.createElement("a",{href:"https://javier.xyz"},"javierbyte"),", thanks! v0.05"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,n){e.exports=n(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.2147282c.chunk.js.map